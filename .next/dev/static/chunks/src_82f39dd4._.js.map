{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Jelly/src/lib/highcharts.ts"],"sourcesContent":["// @ts-nocheck â€” Highcharts ES module masters lack type declarations\n// Import both from es-modules path so they share the same Globals instance\nimport Highcharts from \"highcharts/es-modules/masters/highstock.src.js\";\nimport \"highcharts/es-modules/masters/highcharts-more.src.js\";\n\nHighcharts.setOptions({\n  chart: {\n    backgroundColor: \"transparent\",\n  },\n  title: { text: undefined },\n  credits: { enabled: false },\n  legend: { enabled: false },\n  xAxis: {\n    gridLineColor: \"rgba(255,255,255,0.06)\",\n    lineColor: \"rgba(255,255,255,0.12)\",\n    labels: { style: { color: \"#9ca3af\" } },\n  },\n  yAxis: {\n    gridLineColor: \"rgba(255,255,255,0.06)\",\n    labels: { style: { color: \"#9ca3af\" } },\n    title: { text: undefined },\n  },\n  tooltip: {\n    backgroundColor: \"rgba(17,24,39,0.92)\",\n    borderColor: \"rgba(255,255,255,0.12)\",\n    style: { color: \"#e5e7eb\" },\n  },\n  navigator: {\n    outlineColor: \"rgba(255,255,255,0.18)\",\n    maskFill: \"rgba(255,255,255,0.05)\",\n    series: { color: \"#6366f1\" },\n    xAxis: { labels: { style: { color: \"#9ca3af\" } } },\n  },\n  rangeSelector: {\n    buttonTheme: {\n      fill: \"rgba(255,255,255,0.06)\",\n      stroke: \"rgba(255,255,255,0.12)\",\n      style: { color: \"#9ca3af\" },\n      states: {\n        hover: { fill: \"rgba(255,255,255,0.12)\" },\n        select: { fill: \"rgba(99,102,241,0.3)\", style: { color: \"#e5e7eb\" } },\n      },\n    },\n    inputStyle: { color: \"#e5e7eb\", backgroundColor: \"rgba(255,255,255,0.06)\" },\n    labelStyle: { color: \"#9ca3af\" },\n  },\n  scrollbar: {\n    barBackgroundColor: \"rgba(255,255,255,0.12)\",\n    trackBackgroundColor: \"rgba(255,255,255,0.04)\",\n    buttonBackgroundColor: \"rgba(255,255,255,0.06)\",\n  },\n});\n\nexport default Highcharts;\n"],"names":[],"mappings":";;;;AAAA,oEAAoE;AACpE,2EAA2E;AAC3E;AACA;;;AAEA,wLAAU,CAAC,UAAU,CAAC;IACpB,OAAO;QACL,iBAAiB;IACnB;IACA,OAAO;QAAE,MAAM;IAAU;IACzB,SAAS;QAAE,SAAS;IAAM;IAC1B,QAAQ;QAAE,SAAS;IAAM;IACzB,OAAO;QACL,eAAe;QACf,WAAW;QACX,QAAQ;YAAE,OAAO;gBAAE,OAAO;YAAU;QAAE;IACxC;IACA,OAAO;QACL,eAAe;QACf,QAAQ;YAAE,OAAO;gBAAE,OAAO;YAAU;QAAE;QACtC,OAAO;YAAE,MAAM;QAAU;IAC3B;IACA,SAAS;QACP,iBAAiB;QACjB,aAAa;QACb,OAAO;YAAE,OAAO;QAAU;IAC5B;IACA,WAAW;QACT,cAAc;QACd,UAAU;QACV,QAAQ;YAAE,OAAO;QAAU;QAC3B,OAAO;YAAE,QAAQ;gBAAE,OAAO;oBAAE,OAAO;gBAAU;YAAE;QAAE;IACnD;IACA,eAAe;QACb,aAAa;YACX,MAAM;YACN,QAAQ;YACR,OAAO;gBAAE,OAAO;YAAU;YAC1B,QAAQ;gBACN,OAAO;oBAAE,MAAM;gBAAyB;gBACxC,QAAQ;oBAAE,MAAM;oBAAwB,OAAO;wBAAE,OAAO;oBAAU;gBAAE;YACtE;QACF;QACA,YAAY;YAAE,OAAO;YAAW,iBAAiB;QAAyB;QAC1E,YAAY;YAAE,OAAO;QAAU;IACjC;IACA,WAAW;QACT,oBAAoB;QACpB,sBAAsB;QACtB,uBAAuB;IACzB;AACF;uCAEe,wLAAU"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Jelly/src/lib/theme.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect, useCallback } from \"react\";\n\ntype Theme = \"dark\" | \"light\";\n\ninterface ThemeContextValue {\n  theme: Theme;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextValue>({\n  theme: \"dark\",\n  toggleTheme: () => {},\n});\n\nexport function useTheme() {\n  return useContext(ThemeContext);\n}\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<Theme>(\"dark\");\n\n  // Sync with localStorage on mount\n  useEffect(() => {\n    const stored = localStorage.getItem(\"jelly-theme\") as Theme | null;\n    if (stored === \"light\" || stored === \"dark\") {\n      setTheme(stored);\n    }\n  }, []);\n\n  // Apply class to <html>\n  useEffect(() => {\n    const root = document.documentElement;\n    if (theme === \"light\") {\n      root.classList.add(\"light\");\n    } else {\n      root.classList.remove(\"light\");\n    }\n  }, [theme]);\n\n  const toggleTheme = useCallback(() => {\n    setTheme((prev) => {\n      const next = prev === \"dark\" ? \"light\" : \"dark\";\n      localStorage.setItem(\"jelly-theme\", next);\n      return next;\n    });\n  }, []);\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAWA,MAAM,6BAAe,IAAA,8KAAa,EAAoB;IACpD,OAAO;IACP,aAAa,KAAO;AACtB;AAEO,SAAS;;IACd,OAAO,IAAA,2KAAU,EAAC;AACpB;GAFgB;AAIT,SAAS,cAAc,EAAE,QAAQ,EAAiC;;IACvE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAQ;IAE1C,kCAAkC;IAClC,IAAA,0KAAS;mCAAC;YACR,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,IAAI,WAAW,WAAW,WAAW,QAAQ;gBAC3C,SAAS;YACX;QACF;kCAAG,EAAE;IAEL,wBAAwB;IACxB,IAAA,0KAAS;mCAAC;YACR,MAAM,OAAO,SAAS,eAAe;YACrC,IAAI,UAAU,SAAS;gBACrB,KAAK,SAAS,CAAC,GAAG,CAAC;YACrB,OAAO;gBACL,KAAK,SAAS,CAAC,MAAM,CAAC;YACxB;QACF;kCAAG;QAAC;KAAM;IAEV,MAAM,cAAc,IAAA,4KAAW;kDAAC;YAC9B;0DAAS,CAAC;oBACR,MAAM,OAAO,SAAS,SAAS,UAAU;oBACzC,aAAa,OAAO,CAAC,eAAe;oBACpC,OAAO;gBACT;;QACF;iDAAG,EAAE;IAEL,qBACE,6LAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;QAAY;kBAChD;;;;;;AAGP;IAlCgB;KAAA"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Jelly/src/components/ReportChartEmbed.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useMemo } from \"react\";\nimport HighchartsReact from \"highcharts-react-official\";\nimport Highcharts from \"@/lib/highcharts\";\nimport type { PricePoint, EventItem, Decision, Scenario } from \"@/lib/data\";\nimport { buildScenarioBands } from \"@/lib/data\";\nimport { useTheme } from \"@/lib/theme\";\n\ninterface Props {\n  price: PricePoint[];\n  events: EventItem[];\n  decisions: Decision[];\n  scenario: Scenario;\n}\n\nexport default function ReportChartEmbed({\n  price,\n  events,\n  decisions,\n  scenario,\n}: Props) {\n  const lastX = price[price.length - 1][0];\n  const { theme } = useTheme();\n\n  const eventFlags = useMemo(\n    () => events.map((e) => ({ x: e.x, title: e.title, text: e.desc })),\n    [events]\n  );\n\n  const { band } = useMemo(\n    () => buildScenarioBands(scenario, price),\n    [scenario, price]\n  );\n\n  const decisionFlags = useMemo(\n    () =>\n      decisions.map((d) => ({\n        x: d.x,\n        title: d.stance === \"BUY\" ? \"B\" : d.stance === \"SELL\" ? \"S\" : \"H\",\n        text: `<b>${d.title}</b><br/>${d.note}<br/><span style=\"opacity:.85\">by ${d.who}</span>`,\n      })),\n    [decisions]\n  );\n\n  const options: Highcharts.Options = useMemo(\n    () => ({\n      chart: { height: 360 },\n      rangeSelector: { enabled: false },\n      navigator: { enabled: false },\n      scrollbar: { enabled: false },\n      tooltip: { shared: true },\n      xAxis: {\n        plotLines: [\n          {\n            value: lastX,\n            width: 2,\n            color: \"var(--chart-plotline)\",\n            dashStyle: \"ShortDash\" as const,\n            label: {\n              text: \"AS-OF\",\n              style: { color: \"var(--chart-plotline-label)\" },\n              y: 12,\n            },\n            zIndex: 5,\n          },\n        ],\n      },\n      series: [\n        {\n          id: \"price\",\n          name: \"Price\",\n          type: \"line\" as const,\n          data: price,\n        },\n        {\n          id: \"eventsFlags\",\n          type: \"flags\" as const,\n          name: \"Events\",\n          onSeries: \"price\",\n          shape: \"flag\",\n          data: eventFlags,\n          allowOverlapX: true,\n          zIndex: 6,\n          y: -30,\n        },\n        {\n          id: \"scenarioBand\",\n          type: \"arearange\" as const,\n          name: \"Scenario Band\",\n          data: band,\n          color: \"rgba(99,102,241,0.55)\",\n          fillOpacity: 0.35,\n        },\n        {\n          id: \"decisions\",\n          type: \"flags\" as const,\n          onSeries: \"price\",\n          shape: \"circlepin\",\n          name: \"Decisions\",\n          data: decisionFlags,\n          allowOverlapX: true,\n          zIndex: 5,\n          y: -65,\n        },\n      ],\n    }),\n    [price, eventFlags, band, decisionFlags, lastX]\n  );\n\n  return (\n    <HighchartsReact\n      key={theme}\n      highcharts={Highcharts}\n      constructorType=\"stockChart\"\n      options={options}\n      containerProps={{ style: { width: \"100%\" } }}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;;;AAPA;;;;;;AAgBe,SAAS,iBAAiB,EACvC,KAAK,EACL,MAAM,EACN,SAAS,EACT,QAAQ,EACF;;IACN,MAAM,QAAQ,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE,CAAC,EAAE;IACxC,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,mIAAQ;IAE1B,MAAM,aAAa,IAAA,wKAAO;gDACxB,IAAM,OAAO,GAAG;wDAAC,CAAC,IAAM,CAAC;wBAAE,GAAG,EAAE,CAAC;wBAAE,OAAO,EAAE,KAAK;wBAAE,MAAM,EAAE,IAAI;oBAAC,CAAC;;+CACjE;QAAC;KAAO;IAGV,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,wKAAO;oCACtB,IAAM,IAAA,2IAAkB,EAAC,UAAU;mCACnC;QAAC;QAAU;KAAM;IAGnB,MAAM,gBAAgB,IAAA,wKAAO;mDAC3B,IACE,UAAU,GAAG;2DAAC,CAAC,IAAM,CAAC;wBACpB,GAAG,EAAE,CAAC;wBACN,OAAO,EAAE,MAAM,KAAK,QAAQ,MAAM,EAAE,MAAM,KAAK,SAAS,MAAM;wBAC9D,MAAM,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,kCAAkC,EAAE,EAAE,GAAG,CAAC,OAAO,CAAC;oBAC1F,CAAC;;kDACH;QAAC;KAAU;IAGb,MAAM,UAA8B,IAAA,wKAAO;6CACzC,IAAM,CAAC;gBACL,OAAO;oBAAE,QAAQ;gBAAI;gBACrB,eAAe;oBAAE,SAAS;gBAAM;gBAChC,WAAW;oBAAE,SAAS;gBAAM;gBAC5B,WAAW;oBAAE,SAAS;gBAAM;gBAC5B,SAAS;oBAAE,QAAQ;gBAAK;gBACxB,OAAO;oBACL,WAAW;wBACT;4BACE,OAAO;4BACP,OAAO;4BACP,OAAO;4BACP,WAAW;4BACX,OAAO;gCACL,MAAM;gCACN,OAAO;oCAAE,OAAO;gCAA8B;gCAC9C,GAAG;4BACL;4BACA,QAAQ;wBACV;qBACD;gBACH;gBACA,QAAQ;oBACN;wBACE,IAAI;wBACJ,MAAM;wBACN,MAAM;wBACN,MAAM;oBACR;oBACA;wBACE,IAAI;wBACJ,MAAM;wBACN,MAAM;wBACN,UAAU;wBACV,OAAO;wBACP,MAAM;wBACN,eAAe;wBACf,QAAQ;wBACR,GAAG,CAAC;oBACN;oBACA;wBACE,IAAI;wBACJ,MAAM;wBACN,MAAM;wBACN,MAAM;wBACN,OAAO;wBACP,aAAa;oBACf;oBACA;wBACE,IAAI;wBACJ,MAAM;wBACN,UAAU;wBACV,OAAO;wBACP,MAAM;wBACN,MAAM;wBACN,eAAe;wBACf,QAAQ;wBACR,GAAG,CAAC;oBACN;iBACD;YACH,CAAC;4CACD;QAAC;QAAO;QAAY;QAAM;QAAe;KAAM;IAGjD,qBACE,6LAAC,mMAAe;QAEd,YAAY,sIAAU;QACtB,iBAAgB;QAChB,SAAS;QACT,gBAAgB;YAAE,OAAO;gBAAE,OAAO;YAAO;QAAE;OAJtC;;;;;AAOX;GAvGwB;;QAOJ,mIAAQ;;;KAPJ"}}]
}