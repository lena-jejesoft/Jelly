{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Jelly/src/lib/highcharts.ts"],"sourcesContent":["// @ts-nocheck — Highcharts ES module masters lack type declarations\n// Import both from es-modules path so they share the same Globals instance\nimport Highcharts from \"highcharts/es-modules/masters/highstock.src.js\";\nimport \"highcharts/es-modules/masters/highcharts-more.src.js\";\n\nHighcharts.setOptions({\n  chart: {\n    backgroundColor: \"transparent\",\n  },\n  title: { text: undefined },\n  credits: { enabled: false },\n  legend: { enabled: false },\n  xAxis: {\n    gridLineColor: \"rgba(255,255,255,0.06)\",\n    lineColor: \"rgba(255,255,255,0.12)\",\n    labels: { style: { color: \"#9ca3af\" } },\n  },\n  yAxis: {\n    gridLineColor: \"rgba(255,255,255,0.06)\",\n    labels: { style: { color: \"#9ca3af\" } },\n    title: { text: undefined },\n  },\n  tooltip: {\n    backgroundColor: \"rgba(17,24,39,0.92)\",\n    borderColor: \"rgba(255,255,255,0.12)\",\n    style: { color: \"#e5e7eb\" },\n  },\n  navigator: {\n    outlineColor: \"rgba(255,255,255,0.18)\",\n    maskFill: \"rgba(255,255,255,0.05)\",\n    series: { color: \"#6366f1\" },\n    xAxis: { labels: { style: { color: \"#9ca3af\" } } },\n  },\n  rangeSelector: {\n    buttonTheme: {\n      fill: \"rgba(255,255,255,0.06)\",\n      stroke: \"rgba(255,255,255,0.12)\",\n      style: { color: \"#9ca3af\" },\n      states: {\n        hover: { fill: \"rgba(255,255,255,0.12)\" },\n        select: { fill: \"rgba(99,102,241,0.3)\", style: { color: \"#e5e7eb\" } },\n      },\n    },\n    inputStyle: { color: \"#e5e7eb\", backgroundColor: \"rgba(255,255,255,0.06)\" },\n    labelStyle: { color: \"#9ca3af\" },\n  },\n  scrollbar: {\n    barBackgroundColor: \"rgba(255,255,255,0.12)\",\n    trackBackgroundColor: \"rgba(255,255,255,0.04)\",\n    buttonBackgroundColor: \"rgba(255,255,255,0.06)\",\n  },\n});\n\nexport default Highcharts;\n"],"names":[],"mappings":";;;;AAAA,oEAAoE;AACpE,2EAA2E;AAC3E;AACA;;;AAEA,wLAAU,CAAC,UAAU,CAAC;IACpB,OAAO;QACL,iBAAiB;IACnB;IACA,OAAO;QAAE,MAAM;IAAU;IACzB,SAAS;QAAE,SAAS;IAAM;IAC1B,QAAQ;QAAE,SAAS;IAAM;IACzB,OAAO;QACL,eAAe;QACf,WAAW;QACX,QAAQ;YAAE,OAAO;gBAAE,OAAO;YAAU;QAAE;IACxC;IACA,OAAO;QACL,eAAe;QACf,QAAQ;YAAE,OAAO;gBAAE,OAAO;YAAU;QAAE;QACtC,OAAO;YAAE,MAAM;QAAU;IAC3B;IACA,SAAS;QACP,iBAAiB;QACjB,aAAa;QACb,OAAO;YAAE,OAAO;QAAU;IAC5B;IACA,WAAW;QACT,cAAc;QACd,UAAU;QACV,QAAQ;YAAE,OAAO;QAAU;QAC3B,OAAO;YAAE,QAAQ;gBAAE,OAAO;oBAAE,OAAO;gBAAU;YAAE;QAAE;IACnD;IACA,eAAe;QACb,aAAa;YACX,MAAM;YACN,QAAQ;YACR,OAAO;gBAAE,OAAO;YAAU;YAC1B,QAAQ;gBACN,OAAO;oBAAE,MAAM;gBAAyB;gBACxC,QAAQ;oBAAE,MAAM;oBAAwB,OAAO;wBAAE,OAAO;oBAAU;gBAAE;YACtE;QACF;QACA,YAAY;YAAE,OAAO;YAAW,iBAAiB;QAAyB;QAC1E,YAAY;YAAE,OAAO;QAAU;IACjC;IACA,WAAW;QACT,oBAAoB;QACpB,sBAAsB;QACtB,uBAAuB;IACzB;AACF;uCAEe,wLAAU"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Jelly/src/lib/theme.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect, useCallback } from \"react\";\n\ntype Theme = \"dark\" | \"light\";\n\ninterface ThemeContextValue {\n  theme: Theme;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextValue>({\n  theme: \"dark\",\n  toggleTheme: () => {},\n});\n\nexport function useTheme() {\n  return useContext(ThemeContext);\n}\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<Theme>(\"dark\");\n\n  // Sync with localStorage on mount\n  useEffect(() => {\n    const stored = localStorage.getItem(\"jelly-theme\") as Theme | null;\n    if (stored === \"light\" || stored === \"dark\") {\n      setTheme(stored);\n    }\n  }, []);\n\n  // Apply class to <html>\n  useEffect(() => {\n    const root = document.documentElement;\n    if (theme === \"light\") {\n      root.classList.add(\"light\");\n    } else {\n      root.classList.remove(\"light\");\n    }\n  }, [theme]);\n\n  const toggleTheme = useCallback(() => {\n    setTheme((prev) => {\n      const next = prev === \"dark\" ? \"light\" : \"dark\";\n      localStorage.setItem(\"jelly-theme\", next);\n      return next;\n    });\n  }, []);\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAWA,MAAM,6BAAe,IAAA,8KAAa,EAAoB;IACpD,OAAO;IACP,aAAa,KAAO;AACtB;AAEO,SAAS;;IACd,OAAO,IAAA,2KAAU,EAAC;AACpB;GAFgB;AAIT,SAAS,cAAc,EAAE,QAAQ,EAAiC;;IACvE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAQ;IAE1C,kCAAkC;IAClC,IAAA,0KAAS;mCAAC;YACR,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,IAAI,WAAW,WAAW,WAAW,QAAQ;gBAC3C,SAAS;YACX;QACF;kCAAG,EAAE;IAEL,wBAAwB;IACxB,IAAA,0KAAS;mCAAC;YACR,MAAM,OAAO,SAAS,eAAe;YACrC,IAAI,UAAU,SAAS;gBACrB,KAAK,SAAS,CAAC,GAAG,CAAC;YACrB,OAAO;gBACL,KAAK,SAAS,CAAC,MAAM,CAAC;YACxB;QACF;kCAAG;QAAC;KAAM;IAEV,MAAM,cAAc,IAAA,4KAAW;kDAAC;YAC9B;0DAAS,CAAC;oBACR,MAAM,OAAO,SAAS,SAAS,UAAU;oBACzC,aAAa,OAAO,CAAC,eAAe;oBACpC,OAAO;gBACT;;QACF;iDAAG,EAAE;IAEL,qBACE,6LAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;QAAY;kBAChD;;;;;;AAGP;IAlCgB;KAAA"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/Jelly/src/components/UnifiedChart.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useRef, useCallback, useMemo } from \"react\";\nimport HighchartsReact from \"highcharts-react-official\";\nimport Highcharts from \"@/lib/highcharts\";\nimport type { PricePoint, EventItem, Decision, Scenario } from \"@/lib/data\";\nimport { DAY, buildScenarioBands } from \"@/lib/data\";\nimport { Toolbar, Select, Button, ControlGroup } from \"./Toolbar\";\nimport { useTheme } from \"@/lib/theme\";\n\ninterface Props {\n  price: PricePoint[];\n  events: EventItem[];\n  filterType: string;\n  filterImpact: number;\n  onFilterTypeChange: (v: string) => void;\n  onFilterImpactChange: (v: number) => void;\n  onEventClick: (evt: EventItem) => void;\n  scenario: Scenario;\n  decisions: Decision[];\n  onScenarioChange: (v: Scenario) => void;\n  onAddDecision: () => void;\n}\n\nexport default function UnifiedChart({\n  price,\n  events,\n  filterType,\n  filterImpact,\n  onFilterTypeChange,\n  onFilterImpactChange,\n  onEventClick,\n  scenario,\n  decisions,\n  onScenarioChange,\n  onAddDecision,\n}: Props) {\n  const chartRef = useRef<HighchartsReact.RefObject>(null);\n  const { theme } = useTheme();\n\n  const lastX = price[price.length - 1][0];\n\n  /* ── filtered event flags ── */\n  const filteredFlags = useMemo(() => {\n    return events\n      .filter((e) => {\n        const okType = filterType === \"ALL\" || e.type === filterType;\n        const okImpact = e.impact >= filterImpact;\n        return okType && okImpact;\n      })\n      .map((e) => ({ x: e.x, title: e.title, text: e.desc }));\n  }, [events, filterType, filterImpact]);\n\n  /* ── event click handler ── */\n  const handleFlagClick = useCallback(\n    function (this: Highcharts.Point) {\n      const pt = this;\n      const found =\n        events.find((e) => e.x === pt.x && e.title === pt.options.title) ||\n        events.find((e) => e.x === pt.x);\n      if (found) onEventClick(found);\n    },\n    [events, onEventClick]\n  );\n\n  /* ── scenario band ── */\n  const { band } = useMemo(\n    () => buildScenarioBands(scenario, price),\n    [scenario, price]\n  );\n\n  /* ── decision flags ── */\n  const decisionFlags = useMemo(\n    () =>\n      decisions.map((d) => ({\n        x: d.x,\n        title: d.stance === \"BUY\" ? \"B\" : d.stance === \"SELL\" ? \"S\" : \"H\",\n        text: `<b>${d.title}</b><br/>${d.note}<br/><span style=\"opacity:.85\">by ${d.who} • ${d.stance}</span>`,\n      })),\n    [decisions]\n  );\n\n  /* ── Highcharts options ── */\n  const options: Highcharts.Options = useMemo(\n    () => ({\n      rangeSelector: { enabled: true },\n      tooltip: { shared: true },\n      xAxis: {\n        plotLines: [\n          {\n            value: lastX,\n            width: 2,\n            color: \"var(--chart-plotline)\",\n            dashStyle: \"ShortDash\" as const,\n            label: {\n              text: \"AS-OF\",\n              style: { color: \"var(--chart-plotline-label)\" },\n              y: 12,\n            },\n            zIndex: 5,\n          },\n        ],\n      },\n      series: [\n        {\n          id: \"price\",\n          name: \"Price\",\n          type: \"line\" as const,\n          data: price,\n        },\n        {\n          id: \"eventsFlags\",\n          type: \"flags\" as const,\n          name: \"Events\",\n          onSeries: \"price\",\n          shape: \"flag\",\n          data: filteredFlags,\n          allowOverlapX: true,\n          zIndex: 6,\n          y: -30,\n          point: {\n            events: {\n              click: handleFlagClick,\n            },\n          },\n        },\n        {\n          id: \"scenarioBand\",\n          type: \"arearange\" as const,\n          name: \"Scenario Band\",\n          data: band,\n          color: \"rgba(99,102,241,0.55)\",\n          fillOpacity: 0.35,\n        },\n        {\n          id: \"decisions\",\n          type: \"flags\" as const,\n          onSeries: \"price\",\n          shape: \"circlepin\",\n          name: \"Decisions\",\n          data: decisionFlags,\n          allowOverlapX: true,\n          zIndex: 5,\n          y: -65,\n        },\n      ],\n    }),\n    [price, filteredFlags, handleFlagClick, band, decisionFlags, lastX]\n  );\n\n  /* ── zoom helpers ── */\n  const jumpToNow = useCallback(() => {\n    const chart = chartRef.current?.chart;\n    if (chart) {\n      chart.xAxis[0].setExtremes(lastX - 60 * DAY, lastX + 120 * DAY);\n    }\n  }, [lastX]);\n\n  const resetZoom = useCallback(() => {\n    const chart = chartRef.current?.chart;\n    if (chart) chart.xAxis[0].setExtremes(undefined, undefined);\n  }, []);\n\n  /* ── initial zoom to show scenario band ── */\n  const afterChartCreated = useCallback(\n    (chart: Highcharts.Chart) => {\n      chart.xAxis[0].setExtremes(lastX - 60 * DAY, lastX + 120 * DAY);\n    },\n    [lastX]\n  );\n\n  return (\n    <div className=\"card\">\n      <h2 className=\"text-[var(--text-primary)] text-2xl font-bold mb-5\">Price &amp; Event Timeline</h2>\n      {/* ── 방식 C: 단일 행 그룹핑 툴바 ── */}\n      <Toolbar>\n        <ControlGroup label=\"이벤트\">\n          <Select value={filterType} onChange={onFilterTypeChange}>\n            <option value=\"ALL\">전체</option>\n            <option value=\"EARNINGS\">실적</option>\n            <option value=\"FUNDING\">증자/자금조달</option>\n            <option value=\"CONTRACT\">수주/계약</option>\n            <option value=\"REGULATION\">규제/정책</option>\n            <option value=\"INSIDER\">오너/지배구조</option>\n          </Select>\n          <Select\n            value={String(filterImpact)}\n            onChange={(v) => onFilterImpactChange(Number(v))}\n          >\n            <option value=\"0\">강도 0+</option>\n            <option value=\"1\">강도 1+</option>\n            <option value=\"2\">강도 2+</option>\n            <option value=\"3\">강도 3+</option>\n          </Select>\n        </ControlGroup>\n\n        <ControlGroup label=\"시나리오\">\n          <Select\n            value={scenario}\n            onChange={(v) => onScenarioChange(v as Scenario)}\n          >\n            <option value=\"BASE\">BASE (중립)</option>\n            <option value=\"BULL\">BULL (상방)</option>\n            <option value=\"BEAR\">BEAR (하방)</option>\n          </Select>\n          <Button onClick={jumpToNow}>현재/미래</Button>\n          <Button onClick={onAddDecision}>판단 로그 추가 (메모)</Button>\n        </ControlGroup>\n\n        <Button onClick={resetZoom}>줌 리셋</Button>\n      </Toolbar>\n\n      {/* ── 통합 차트 ── */}\n      <div className=\"h-full\">\n        <HighchartsReact\n          key={theme}\n          highcharts={Highcharts}\n          constructorType=\"stockChart\"\n          options={options}\n          ref={chartRef}\n          containerProps={{ style: { height: \"100%\" } }}\n          callback={afterChartCreated}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}